- id: tasmota_state_on_startup
  alias: Tasmota - Power state on HA startup
  trigger:
  - event: start
    platform: homeassistant
  action:
  - data:
      payload: '1'
      topic: sonoffs/cmnd/state
    service: mqtt.publish
  - data:
      payload: '1'
      topic: sonoffs/tele/STATE
    service: mqtt.publish
- id: rolladen_auf
  alias: Rolladen - Auf
  description: ''
  trigger:
  - event: sunrise
    offset: 03:00:00
    platform: sun
  condition: []
  action:
  - data:
      entity_id: cover.rolladen
      position: 100
    service: cover.set_cover_position
  - data:
      message: Rolladen ge√∂ffnet
      title: üîº Rolladen
    service: notify.telegram_schick_home
  mode: single
- id: rolladen_zu
  alias: Rolladen - Zu
  description: ''
  trigger:
  - event: sunset
    offset: 01:30:00
    platform: sun
  condition: []
  action:
  - data:
      entity_id: cover.rolladen
      position: 0
    service: cover.set_cover_position
  - data:
      message: Rolladen geschlossen
      title: üîΩ Rolladen
    service: notify.telegram_schick_home
  mode: single
- id: garagenlicht_einschalten
  alias: Garage - Licht einschalten
  description: Garagenlicht einschalten nach der Sonnenunregang oder wenn es dunkel
    ist
  trigger:
  - type: value
    platform: device
    device_id: db8b13c767d84865a607aca77975a221
    entity_id: sensor.torposition
    domain: sensor
    above: 50
    for:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  condition:
  - condition: or
    conditions:
    - condition: sun
      before: sunrise
      before_offset: 00:15:00
    - condition: sun
      after: sunset
      after_offset: -00:15:00
  action:
  - type: turn_on
    device_id: 63713a671de1472e84d5832bcb399f0e
    entity_id: light.sonoffbnsz01
    domain: light
    brightness_pct: 100
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: 63713a671de1472e84d5832bcb399f0e
    entity_id: light.sonoffbnsz01
    domain: light
  mode: restart
- id: garagenlicht_ausschalten
  alias: Garage - Licht ausschalten
  description: Garagenlicht ausschalten wenn das Garagentor geschlossen wurde
  trigger:
  - platform: state
    entity_id: binary_sensor.tor_offen
    to: 'off'
    for:
      hours: 0
      minutes: 0
      seconds: 5
  - platform: state
    entity_id: input_boolean.torteil
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 5
  condition: []
  action:
  - type: turn_off
    device_id: 63713a671de1472e84d5832bcb399f0e
    entity_id: light.sonoffbnsz01
    domain: light
  mode: restart
- id: camera_garage_richtung
  alias: Camera - Garage Richtung
  description: –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏—è –≥–∞—Ä–∞–∂–Ω—ã—Ö –≤–æ—Ä–æ—Ç
  trigger:
  - type: value
    platform: device
    device_id: db8b13c767d84865a607aca77975a221
    entity_id: sensor.torposition
    domain: sensor
    above: 30
    for:
      hours: 0
      minutes: 0
      seconds: 5
  - type: value
    platform: device
    device_id: db8b13c767d84865a607aca77975a221
    entity_id: sensor.torposition
    domain: sensor
    below: 20
    for:
      hours: 0
      minutes: 0
      seconds: 5
  - platform: state
    entity_id: binary_sensor.tor_offen
    to: 'off'
    for:
      hours: 0
      minutes: 0
      seconds: 3
  - platform: state
    entity_id: input_boolean.torteil
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 5
  condition: []
  action:
  - choose:
    - conditions:
      - type: is_value
        condition: device
        device_id: db8b13c767d84865a607aca77975a221
        entity_id: sensor.torposition
        domain: sensor
        above: 30
      sequence:
      - service: reolink_dev.ptz_control
        data:
          entity_id: camera.garage
          command: TOPOS
          preset: 1
    - conditions:
      - type: is_value
        condition: device
        device_id: db8b13c767d84865a607aca77975a221
        entity_id: sensor.tor_distanz
        domain: sensor
        below: 20
      sequence:
      - service: reolink_dev.ptz_control
        data:
          entity_id: camera.garage
          command: TOPOS
          preset: 2
      - delay:
          hours: 0
          minutes: 0
          seconds: 30
          milliseconds: 0
      - service: reolink_dev.ptz_control
        data:
          entity_id: camera.garage
          command: TOPOS
          preset: 2
    default: []
  mode: restart
